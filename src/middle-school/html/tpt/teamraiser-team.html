<div ng-controller="TeamPageCtrl" ng-cloak>
  <div class="ym-page-section ym-page-section__top">
    <div class="col-md-6 ym-user-image" ng-init="teamPagePhoto1.customUrl = '[[C4:graphic_upload]]'; teamPagePhoto1.caption = '[[T6:[[C1:graphic_caption]]]]'" ng-style="{'background-image': (teamPagePhoto1.customUrl && teamPagePhoto1.customUrl != '') ? ('url(' + teamPagePhoto1.customUrl + ')') : ('url(' + teamPagePhoto1.defaultUrl + ')')}">
      <div class="ym-user-image-inner">
        [[?
          [[?xx::x[[S1:cons_id]]x::::
            [[?x[[E48:[[S80:trID]]:team-id]]xTRUEx::x[[S334:team_id]]x[[E48:[[S80:trID]]-[[S1:cons_id]]:if-is-captain]]x::T::]]
          ]]
        ::T::
          <button type="button" class="btn btn-md-wide btn-toggle" ng-click="editTeamPhoto1()">
            <span class="fa fa-camera"></span> Edit Photo
          </button>
        ::]]
        <img class="hidden-md hidden-lg" ng-src="{{teamPagePhoto1.customUrl && teamPagePhoto1.customUrl != '' ? teamPagePhoto1.customUrl : teamPagePhoto1.defaultUrl}}" alt="{{teamPagePhoto1.caption}}" ng-cloak>
      </div>
      <div class="caption" ng-if="teamPagePhoto1.caption && teamPagePhoto1.caption != ''" ng-cloak>
        <span ng-bind-html="teamPagePhoto1.caption"></span>
      </div>
    </div>
    <div class="col-md-6 ym-progress ym-secondary-medium-color">
      <h2 class="ym-progress__title h4">
        Help us raise more life-saving donations!
      </h2>
      <div class="ym-progress__cta">         
          <a class="btn btn-primary btn-lg" ng-href="TRR?fr_id=[[S334:fr_id]]&pg=tfind&fr_tm_opt=existing&fr_team_id={{teamId}}">
            Sign Up
          </a>
          <a class="btn btn-primary btn-lg" ng-href="Donation2?df_id=[[E42:[[S334:fr_id]]:form-id]]&FR_ID=[[S334:fr_id]]&PROXY_ID=[[S334:team_id]]&PROXY_TYPE=22">
            Donate
          </a>
      </div>
      <div class="ym-progress__thermometer" ng-if="teamProgress.goal && teamProgress.goal != 0" ng-cloak>
        <div class="ym-progress__thermometer--fill" ng-style="{'width': teamProgress.percent + '%'}"></div>
      </div>
      <div class="ym-progress__stats">
        <div class="ym-progress__amount col-sm-6">
          <p>
            We've raised <strong><span ng-bind-html="teamProgress.amountRaisedFormatted"></span></strong>
          </p>
        </div>
        <div class="ym-progress__goal col-sm-6">
          <p>
            Our goal is <strong><span ng-bind-html="teamProgress.goalFormatted"></span></strong>
          </p>
        </div>
        <div class="clearfix"></div>
        <div class="ym-progress__date" ng-if="eventDate != 'User Provided No Response'" ng-cloak>
          <p>
            Our event date is <strong><span ng-bind-html="eventDate"></span></strong>
          </p>
        </div>
      </div>
    </div>
    <div class="clearfix"></div>
  </div>
  <div class="ym-page-section ym-page-section__main">
    <div class="container">
      <div class="ym-our-stats ym-promo-block" ng-if="participantCount > 0" ng-cloak>
        <h2 class="ym-headline">
          Our Stats
        </h2>
        <div class="ym-promo-block__item ym-promo-block__item--members ym-promo-block--circle">
          <h2 class="ym-headline">
            {{participantCount}}
          </h2>
          <p>
            team members registered.
          </p>
        </div>
        <div class="ym-promo-block__item ym-promo-block__item--exercise ym-promo-block--circle" ng-if="activity1amt != 0" ng-cloak>
          <h2 class="ym-headline">
            {{activity1amt}}
          </h2>
          <p>
            daily challenges of excersing 60 minutes a day!
          </p>
        </div>
        <div class="ym-promo-block__item ym-promo-block__item--water ym-promo-block--circle" ng-if="activity2amt != 0" ng-cloak>
          <h2 class="ym-headline">
            {{activity2amt}}
          </h2>
          <p>
            daily challenges of choosing water over sugar drinks
          </p>
        </div>
        <div class="ym-promo-block__item ym-promo-block__item--food ym-promo-block--circle" ng-if="activity3amt != 0" ng-cloak>
          <h2 class="ym-headline">
            {{activity3amt}}
          </h2>
          <p>
            daily challenges of fruits and veggies at every meal
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="ym-page-section ym-page-section__list ym-accent-color">
    <div class="ym-story" ng-class="teamParticipants.totalFundraisers < 1 ? 'col-md-12' : 'col-md-6'">
      <h3 class="h5">
        Our Class is Heart Healthy!
      </h3>
      [[?
        [[?xx::x[[S1:cons_id]]x::::
          [[?x[[E48:[[S80:trID]]:team-id]]xTRUEx::x[[S334:team_id]]x[[E48:[[S80:trID]]-[[S1:cons_id]]:if-is-captain]]x::T::]]
        ]]
      ::T::
        <div class="ym-story-edit-btns">
          <button type="button" class="btn btn-md-wide btn-toggle" ng-click="editTeamPageContent()" ng-if="teamPageContent.mode == 'view'">
            <span class="fa fa-pencil"></span> Edit Story
          </button>
          <div ng-if="teamPageContent.mode == 'edit'" ng-cloak>
            <button type="button" class="btn btn-md-wide btn-primary" ng-click="saveTeamPageContent()">
              <span class="fa fa-pencil"></span> <strong>Save Story</strong>
            </button> 
            <button type="button" class="btn btn-md-wide btn-toggle" ng-click="resetTeamPageContent()">
              Cancel
            </button>
          </div>
        </div>
      ::]]
      <div class="hidden js--default-page-content" ng-non-bindable>
        [[C6:fr_rich_text]]
      </div>
      <div ng-show="teamPageContent.mode == 'view'">
        <div ng-bind-html="teamPageContent.rich_text">
          <div ng-non-bindable>
            [[C6:fr_rich_text]]
          </div>
        </div>
      </div>
      [[?
        [[?xx::x[[S1:cons_id]]x::::
          [[?x[[E48:[[S80:trID]]:team-id]]xTRUEx::x[[S334:team_id]]x[[E48:[[S80:trID]]-[[S1:cons_id]]:if-is-captain]]x::T::]]
        ]]
      ::T::
        <div class="ym-page-content-editor" ng-show="teamPageContent.mode == 'edit'" ng-cloak>
          <div text-angular name="ng_rich_text" ng-model="teamPageContent.ng_rich_text" ta-toolbar="{{teamPageContent.textEditorToolbar}}"></div>
        </div>
      ::]]
    </div>
    <div class="ym-list" ng-class="teamParticipants.totalFundraisers < 1 ? 'hidden' : 'col-md-6'">
      <h3 class="h5">
        Top Fundraisers
      </h3>
      <div class="ym-donor-list">
        <team-participant-list team-id="'[[T6:[[S334:team_id]]]]'" participants="teamParticipants.participants"></team-participant-list>
      </div>
    </div>
    <div class="clearfix"></div>
  </div>
</div>