(function(){angular.module("ahaLuminateApp",["ngSanitize","ui.bootstrap","ahaLuminateControllers"]),angular.module("ahaLuminateControllers",[]),angular.module("ahaLuminateApp").constant("APP_INFO",{version:"1.0.0"}),angular.module("ahaLuminateApp").run(["$rootScope","APP_INFO",function(a,b){var c;if(c=angular.element("[data-aha-luminate-root]"),""!==c.data("api-key")&&(a.apiKey=c.data("api-key")),a.apiKey||new Error("AHA Luminate Framework: No Luminate Online API Key is defined."),""!==c.data("cons-id")&&(a.consId=c.data("cons-id")),""!==c.data("auth-token")&&(a.authToken=c.data("auth-token")),""!==c.data("fr-id"))return a.frId=c.data("fr-id")}]),angular.element(document).ready(function(){var a,b;a=["ahaLuminateApp"];try{angular.module("trPcApp"),a.push("trPcApp")}catch(a){b=a}try{angular.module("trPageEditApp"),a.push("trPageEditApp")}catch(a){b=a}return angular.bootstrap(document,a)}),angular.module("ahaLuminateApp").factory("AuthService",["LuminateRESTService",function(a){return{login:function(b,c){var d;return d="method=login",b&&""!==b&&(d+="&"+b),a.luminateExtendConsRequest(d,!1,c)}}}]),angular.module("ahaLuminateApp").factory("LuminateRESTService",["$rootScope","$http","APP_INFO",function(a,b,c){return{request:function(c,d,e,f){if(d)if(a.apiKey){if(d+="&v=1.0&api_key="+a.apiKey+"&response_format=json&suppress_response_codes=true",!e||a.authToken)return e&&(d+="&auth="+a.authToken),f&&(d+="&fr_id="+a.frId+"&s_trID="+a.frId),b({method:"POST",url:c,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(a){return a})}else;else;},luminateExtendRequest:function(b,c,d,e,f){if(luminateExtend){if(c)return e&&(c+="&fr_id="+a.frId+"&s_trID="+a.frId),luminateExtend.api({api:b,data:c,requiresAuth:d,callback:f||angular.noop})}else;},teamraiserRequest:function(a,b,c){return this.request("CRTeamraiserAPI",a,b,c)},luminateExtendTeamraiserRequest:function(a,b,c,d){return this.luminateExtendRequest("teamraiser",a,b,c,d)},consRequest:function(a,b){return this.request("CRConsAPI",a,b,!1)},luminateExtendConsRequest:function(a,b,c){return this.luminateExtendRequest("cons",a,b,!1,c)}}}]),angular.module("ahaLuminateApp").factory("TeamraiserCompanyService",["LuminateRESTService","$http",function(a,b){return{getCompanies:function(b,c){var d;return d="method=getCompaniesByInfo",b&&""!==b&&(d+="&"+b),a.luminateExtendTeamraiserRequest(d,!1,!0,c)},getCompanyList:function(b,c){var d;return d="method=getCompanyList",b&&""!==b&&(d+="&"+b),a.luminateExtendTeamraiserRequest(d,!1,!0,c)},getCoordinatorQuestion:function(a){return b({method:"GET",url:"PageServer?pagename=ym_coordinator_data&pgwrap=n&consId="+a+"frId=2520"}).then(function(a){return a})}}}]),angular.module("ahaLuminateApp").factory("TeamraiserParticipantService",["LuminateRESTService",function(a){return{getParticipants:function(b,c){var d;return d="method=getParticipants",b&&""!==b&&(d+="&"+b),a.luminateExtendTeamraiserRequest(d,!1,!0,c)}}}]),angular.module("ahaLuminateApp").factory("TeamraiserTeamService",["LuminateRESTService",function(a){return{getTeams:function(b,c){var d;return d="method=getTeamsByInfo",b&&""!==b&&(d+="&"+b),a.luminateExtendTeamraiserRequest(d,!1,!0,c)}}}]),angular.module("ahaLuminateApp").factory("TeamraiserCompanyDataService",["$rootScope","$http",function(a,b){return{getCompanyData:function(){return b.get("PageServer?pagename=getHeartwalkCompanyData&pgwrap=n&response_format=json&fr_id="+a.frId).then(function(a){return a})}}}]),angular.module("ahaLuminateApp").directive("eqColumnHeight",["$window","$timeout",function(a,b){return{restrict:"A",link:function(c,d){var e;return e=function(){var a;return angular.element(d).css("height",""),angular.element(d).siblings("[eq-column-height]").css("height",""),a=Number(angular.element(d).css("height").replace("px","")),angular.element(d).siblings("[eq-column-height]").each(function(){var b;if(b=Number(angular.element(this).css("height").replace("px","")),b>a)return a=b}),angular.element(d).css("height",a+"px"),angular.element(d).siblings("[eq-column-height]").css("height",a+"px")},b(e,500),angular.element(a).bind("resize",function(){return e(),c.$digest()})}}}]),angular.module("ahaLuminateApp").directive("companyParticipantList",function(){return{templateUrl:"../aha-luminate/dist/heart-walk/html/directive/companyParticipantList.html",restrict:"E",replace:!0,scope:{isOpen:"=",isChildCompany:"=",companyName:"=",companyId:"=",frId:"=",participants:"=",searchCompanyParticipants:"="},controller:["$scope",function(a){return a.companyParticipantSearch={participant_name:""},a.toggleCompanyParticipantList=function(){return a.isOpen=!a.isOpen}}]}}),angular.module("ahaLuminateApp").directive("companyTeamList",function(){return{templateUrl:"../aha-luminate/dist/heart-walk/html/directive/companyTeamList.html",restrict:"E",replace:!0,scope:{isOpen:"=",isChildCompany:"=",companyName:"=",companyId:"=",frId:"=",teams:"=",searchCompanyTeams:"="},controller:["$scope",function(a){return a.companyTeamSearch={team_name:""},a.toggleCompanyTeamList=function(){return a.isOpen=!a.isOpen}}]}}),angular.module("ahaLuminateApp").directive("teamMemberList",function(){return{templateUrl:"../aha-luminate/dist/heart-walk/html/directive/teamMemberList.html",restrict:"E",replace:!0,scope:{teamMembers:"=",teamGiftsLabel:"=",teamGiftsAmount:"=",teamGiftsAmountFormatted:"="}}}),angular.module("ahaLuminateApp").directive("topCompanyList",function(){return{templateUrl:"../aha-luminate/dist/heart-walk/html/directive/topCompanyList.html",restrict:"E",replace:!0,scope:{companies:"=",maxSize:"="}}}),angular.module("ahaLuminateApp").directive("topParticipantList",function(){return{templateUrl:"../aha-luminate/dist/heart-walk/html/directive/topParticipantList.html",restrict:"E",replace:!0,scope:{participants:"=",maxSize:"="}}}),angular.module("ahaLuminateApp").directive("topTeamList",function(){return{templateUrl:"../aha-luminate/dist/heart-walk/html/directive/topTeamList.html",restrict:"E",replace:!0,scope:{teams:"=",maxSize:"="}}}),angular.module("ahaLuminateControllers").controller("CompanyListPageCtrl",["$scope","$filter","TeamraiserCompanyDataService",function(a,b,c){return a.topCompanies={ng_sort_column:null,ng_sort_reverse:null},a.sortCompanyList=function(c){return a.topCompanies.ng_sort_column===c&&a.topCompanies.ng_sort_reverse===!1?a.topCompanies.ng_sort_reverse=!0:a.topCompanies.ng_sort_reverse=!1,a.topCompanies.companies=b("orderBy")(a.topCompanies.companies,c,a.topCompanies.ng_sort_reverse),a.topCompanies.ng_sort_column=c},c.getCompanyData().then(function(c){var d,e,f,g;return d=null!=(f=c.data.getCompanyDataResponse)?f.company:void 0,d?(g=[],e=function(a){var b,c,d,e,f,g;for(e=",",d=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),b=[[]],c=null;c=d.exec(a);)f=c[1],g=void 0,f.length&&f!==e&&b.push([]),g=c[2]?c[2].replace(new RegExp('""',"g"),'"'):c[3],b[b.length-1].push(g);return b},angular.forEach(d,function(c){var d;if(""!==c)return d=e(c)[0],g.push({eventId:a.frId,companyId:d[0],participantCount:Number(d[3]),companyName:d[1],teamCount:Number(d[4]),amountRaised:100*Number(d[2]),amountRaisedFormatted:b("currency")(Number(d[2]),"$",0)})}),a.topCompanies.companies=g,a.sortCompanyList("companyName")):a.topCompanies.companies=[]})}]),angular.module("ahaLuminateControllers").controller("CompanyPageCtrl",["$scope","$location","$filter","$timeout","TeamraiserCompanyService","TeamraiserTeamService","TeamraiserParticipantService",function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u;return a.companyId=b.absUrl().split("company_id=")[1].split("&")[0],j=angular.element(".js--default-company-hierarchy"),h=j.find(".trr-td p.righted"),u=0,angular.forEach(h,function(a){var b;if(b=angular.element(a).text())return b=b.replace("$","").replace(/,/g,""),b=100*Number(b),u+=b}),k=angular.element(".js--default-company-summary"),n=k.find(".company-tally-container--gift-count .company-tally-ammount").text(),""===n&&(n="0"),a.companyProgress={numDonations:n},p=function(b,e){if(a.companyProgress.amountRaised=b||0,a.companyProgress.amountRaised=Number(a.companyProgress.amountRaised),a.companyProgress.amountRaisedFormatted=c("currency")(a.companyProgress.amountRaised/100,"$",0),a.companyProgress.goal=e||0,a.companyProgress.goal=Number(a.companyProgress.goal),a.companyProgress.goalFormatted=c("currency")(a.companyProgress.goal/100,"$",0),a.companyProgress.percent=2,d(function(){var b;if(b=a.companyProgress.percent,0!==a.companyProgress.goal&&(b=Math.ceil(a.companyProgress.amountRaised/a.companyProgress.goal*100)),b<2&&(b=2),b>98&&(b=98),a.companyProgress.percent=b,!a.$$phase)return a.$apply()},500),!a.$$phase)return a.$apply()},e.getCompanies("company_id="+a.companyId,{error:function(){return p()},success:function(a){var b,c;return b=null!=(c=a.getCompaniesResponse)?c.company:void 0,b?p(u,b.goal):p()}}),i=j.find(".trr-td a"),a.childCompanies=[],angular.forEach(i,function(b){var c,d;if(d=angular.element(b).attr("href"),c=angular.element(b).text(),d.indexOf("company_id=")!==-1)return a.childCompanies.push({id:d.split("company_id=")[1].split("&")[0],name:c})}),o=a.childCompanies.length+1,a.companyTeamSearch={team_name:""},a.companyTeams={isOpen:!0,page:1},t=function(b,c){if(a.companyTeams.teams=b||[],c=c||0,a.companyTeams.totalNumber=Number(c),!a.$$phase)return a.$apply()},a.childCompanyTeams={companies:[]},m=function(b,c,d,e,f){var g,h;if(g=(null!=(h=a.childCompanyTeams.companies[b])?h.page:void 0)||0,a.childCompanyTeams.companies[b]={isOpen:!0,page:g,companyIndex:b,companyId:c||"",companyName:d||"",teams:e||[]},f=f||0,a.childCompanyTeams.companies[b].totalNumber=Number(f),!a.$$phase)return a.$apply()},r=function(b){if(a.companyProgress.numTeams||(a.companyProgress.numTeams=b||0),!a.$$phase)return a.$apply()},a.getCompanyTeamLists=function(){var b,d;return b=0,d=0,a.getCompanyTeams=function(){var e;return e=a.companyTeams.page-1,f.getTeams("team_company_id="+a.companyId+"&team_name="+a.companyTeamSearch.team_name+"&list_sort_column=total&list_ascending=false&list_page_size=5&list_page_offset="+e,{error:function(){if(t(),b++,b===o)return r(d)},success:function(a){var e,f,g;if(t(),e=null!=(f=a.getTeamSearchByInfoResponse)?f.team:void 0,e&&(angular.isArray(e)||(e=[e]),angular.forEach(e,function(a){var b;if(a.amountRaised=Number(a.amountRaised),a.amountRaisedFormatted=c("currency")(a.amountRaised/100,"$",0),b=a.joinTeamURL)return a.joinTeamURL=b.split("/site/")[1]}),g=a.getTeamSearchByInfoResponse.totalNumberResults,t(e,g),d+=Number(g)),b++,b===o)return r(d)}})},a.getCompanyTeams(),a.getChildCompanyTeams=function(e){var g,h,i,j,k;return g=a.childCompanies[e],h=g.id,i=g.name,j=null!=(k=a.childCompanyTeams.companies[e])?k.page:void 0,j?j--:j=0,f.getTeams("team_company_id="+h+"&team_name="+a.companyTeamSearch.team_name+"&list_sort_column=total&list_ascending=false&list_page_size=5&list_page_offset="+j,{error:function(){if(m(e,h,i),b++,b===o)return r(d)},success:function(a){var f,g,j;if(f=null!=(g=a.getTeamSearchByInfoResponse)?g.team:void 0,f?(angular.isArray(f)||(f=[f]),angular.forEach(f,function(a){var b;if(a.amountRaised=Number(a.amountRaised),a.amountRaisedFormatted=c("currency")(a.amountRaised/100,"$",0),b=a.joinTeamURL)return a.joinTeamURL=b.split("/site/")[1]}),j=a.getTeamSearchByInfoResponse.totalNumberResults,m(e,h,i,f,j),d+=Number(j)):m(e,h,i),b++,b===o)return r(d)}})},angular.forEach(a.childCompanies,function(b,c){return a.getChildCompanyTeams(c)})},a.getCompanyTeamLists(),a.searchCompanyTeams=function(b){return a.companyTeamSearch.team_name=(null!=b?b.team_name:void 0)||"",a.companyTeams.isOpen=!0,a.companyTeams.page=1,angular.forEach(a.childCompanyTeams.companies,function(b,c){return a.childCompanyTeams.companies[c].isOpen=!0,a.childCompanyTeams.companies[c].page=1}),a.getCompanyTeamLists()},a.companyParticipantSearch={participant_name:""},a.companyParticipants={isOpen:!0,page:1},s=function(b,c){if(a.companyParticipants.participants=b||[],c=c||0,a.companyParticipants.totalNumber=Number(c),!a.$$phase)return a.$apply()},a.childCompanyParticipants={companies:[]},l=function(b,c,d,e,f){var g,h;if(g=(null!=(h=a.childCompanyParticipants.companies[b])?h.page:void 0)||0,a.childCompanyParticipants.companies[b]={isOpen:!0,page:g,companyIndex:b,companyId:c||"",companyName:d||"",participants:e||[]},f=f||0,a.childCompanyParticipants.companies[b].totalNumber=Number(f),!a.$$phase)return a.$apply()},q=function(b){if(a.companyProgress.numParticipants=b||0,!a.$$phase)return a.$apply()},a.getCompanyParticipantLists=function(){var b,d;return b=0,d=0,a.getCompanyParticipants=function(){var e,f,h;return e=a.companyParticipantSearch.participant_name,f="",a.companyParticipantSearch.participant_name.indexOf(" ")!==-1&&(e=a.companyParticipantSearch.participant_name.split(" ")[0],f=a.companyParticipantSearch.participant_name.split(" ")[1]),h=a.companyParticipants.page-1,g.getParticipants("team_name="+encodeURIComponent("%%%")+"&first_name="+e+"&last_name="+f+"&list_filter_column=team.company_id&list_filter_text="+a.companyId+"&list_sort_column=total&list_ascending=false&list_page_size=5&list_page_offset="+h,{error:function(){if(s(),b++,b===o)return q(d)},success:function(a){var e,f,g,h;if(s(),f=null!=(g=a.getParticipantsResponse)?g.participant:void 0,f&&(angular.isArray(f)||(f=[f]),e=[],angular.forEach(f,function(a){var b,d;if(null!=(d=a.name)?d.first:void 0)return a.amountRaised=Number(a.amountRaised),a.amountRaisedFormatted=c("currency")(a.amountRaised/100,"$",0),b=a.donationUrl,b&&(a.donationUrl=b.split("/site/")[1]),e.push(a)}),h=a.getParticipantsResponse.totalNumberResults,s(e,h),d+=Number(h)),b++,b===o)return q(d)}})},a.getCompanyParticipants(),a.getChildCompanyParticipants=function(e){var f,h,i,j,k,m,n;return f=a.childCompanies[e],h=f.id,i=f.name,j=a.companyParticipantSearch.participant_name,k="",a.companyParticipantSearch.participant_name.indexOf(" ")!==-1&&(j=a.companyParticipantSearch.participant_name.split(" ")[0],k=a.companyParticipantSearch.participant_name.split(" ")[1]),m=null!=(n=a.childCompanyParticipants.companies[e])?n.page:void 0,m?m--:m=0,g.getParticipants("team_name="+encodeURIComponent("%%%")+"&first_name="+j+"&last_name="+k+"&list_filter_column=team.company_id&list_filter_text="+h+"&list_sort_column=total&list_ascending=false&list_page_size=5&list_page_offset="+m,{error:function(){if(l(e,h,i),b++,b===o)return q(d)},success:function(a){var f,g,j,k;if(g=null!=(j=a.getParticipantsResponse)?j.participant:void 0,g?(angular.isArray(g)||(g=[g]),f=[],angular.forEach(g,function(a){var b,d;if(null!=(d=a.name)?d.first:void 0)return a.amountRaised=Number(a.amountRaised),a.amountRaisedFormatted=c("currency")(a.amountRaised/100,"$",0),b=a.donationUrl,b&&(a.donationUrl=b.split("/site/")[1]),f.push(a)}),k=a.getParticipantsResponse.totalNumberResults,l(e,h,i,f,k),d+=Number(k)):l(e,h,i),b++,b===o)return q(d)}})},angular.forEach(a.childCompanies,function(b,c){return a.getChildCompanyParticipants(c)})},a.getCompanyParticipantLists(),a.searchCompanyParticipants=function(b){return a.companyParticipantSearch.participant_name=(null!=b?b.participant_name:void 0)||"",a.companyParticipants.isOpen=!0,a.companyParticipants.page=1,angular.forEach(a.childCompanyParticipants.companies,function(b,c){return a.childCompanyParticipants.companies[c].isOpen=!0,a.childCompanyParticipants.companies[c].page=1}),a.getCompanyParticipantLists()}}]),angular.module("ahaLuminateControllers").controller("GreetingPageCtrl",["$scope","$http","$timeout","$filter","TeamraiserParticipantService","TeamraiserTeamService","TeamraiserCompanyDataService",function(a,b,c,d,e,f,g){var h,i;return b.get("PageServer?pagename=getTeamraiserInfo&fr_id="+a.frId+"&response_format=json&pgwrap=n").then(function(b){var d;return d=b.data.getTeamraiserInfo,d?a.eventProgress={amountRaised:d.amountRaised,goal:d.goal}:a.eventProgress={amountRaised:0,goal:0},a.eventProgress.percent=2,c(function(){var b;return b=a.eventProgress.percent,0!==a.eventProgress.goal&&(b=Math.ceil(a.eventProgress.amountRaised/a.eventProgress.goal*100)),b<2&&(b=2),b>98&&(b=98),a.eventProgress.percent=b},500)}),a.topParticipants={},h=function(b){if(a.topParticipants.participants=b,!a.$$phase)return a.$apply()},e.getParticipants("first_name="+encodeURIComponent("%%%")+"&list_sort_column=total&list_ascending=false",{error:function(){return h([])},success:function(a){var b,c,e;return b=(null!=(c=a.getParticipantsResponse)?c.participant:void 0)||[],b?(angular.isArray(b)||(b=[b]),e=[],angular.forEach(b,function(a){var b;if(null!=(b=a.name)?b.first:void 0)return a.amountRaised=Number(a.amountRaised),a.amountRaisedFormatted=d("currency")(a.amountRaised/100,"$",0),e.push(a)}),h(e)):h([])}}),a.topTeams={},i=function(b){if(a.topTeams.teams=b,!a.$$phase)return a.$apply()},f.getTeams("list_sort_column=total&list_ascending=false",{error:function(){return i([])},success:function(a){var b,c,e;return c=(null!=(b=a.getTeamSearchByInfoResponse)?b.team:void 0)||[],c?(angular.isArray(c)||(c=[c]),e=[],angular.forEach(c,function(a){return a.amountRaised=Number(a.amountRaised),a.amountRaisedFormatted=d("currency")(a.amountRaised/100,"$",0),e.push(a)}),i(e)):i([])}}),a.topCompanies={},g.getCompanyData().then(function(b){var c,e,f,g;return c=null!=(f=b.data.getCompanyDataResponse)?f.company:void 0,c?(g=[],e=function(a){var b,c,d,e,f,g;for(e=",",d=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),b=[[]],c=null;c=d.exec(a);)f=c[1],g=void 0,f.length&&f!==e&&b.push([]),g=c[2]?c[2].replace(new RegExp('""',"g"),'"'):c[3],b[b.length-1].push(g);return b},angular.forEach(c,function(b){var c;if(""!==b)return c=e(b)[0],g.push({eventId:a.frId,companyId:c[0],participantCount:c[3],companyName:c[1],teamCount:c[4],amountRaised:100*Number(c[2]),amountRaisedFormatted:d("currency")(Number(c[2]),"$",0)})}),a.topCompanies.companies=d("orderBy")(g,"amountRaised",!0)):a.topCompanies.companies=[]})}]),angular.module("ahaLuminateControllers").controller("MainCtrl",["$scope",function(a){return angular.element("body").on("click",".addthis_button_facebook",function(a){return a.preventDefault()})}]),angular.module("ahaLuminateControllers").controller("PersonalPageCtrl",["$scope","$location","$timeout","TeamraiserParticipantService",function(a,b,c,d){var e;return a.participantId=b.absUrl().split("px=")[1].split("&")[0],a.participantProgress={},e=function(b,d){if(a.participantProgress.amountRaised=b||0,a.participantProgress.amountRaised=Number(a.participantProgress.amountRaised),a.participantProgress.goal=d||0,a.participantProgress.percent=2,c(function(){var b;if(b=a.participantProgress.percent,0!==a.participantProgress.goal&&(b=Math.ceil(a.participantProgress.amountRaised/a.participantProgress.goal*100)),b<2&&(b=2),b>98&&(b=98),a.participantProgress.percent=b,!a.$$phase)return a.$apply()},500),!a.$$phase)return a.$apply()},d.getParticipants("first_name="+encodeURIComponent("%%%")+"&list_filter_column=reg.cons_id&list_filter_text="+a.participantId,{error:function(){return e()},success:function(a){var b,c;return b=null!=(c=a.getParticipantsResponse)?c.participant:void 0,b?e(b.amountRaised,b.goal):e()}})}]),angular.module("ahaLuminateControllers").controller("TeamPageCtrl",["$scope","$location","$timeout","$filter","TeamraiserTeamService","TeamraiserParticipantService",function(a,b,c,d,e,f){var g,h,i,j,k;return a.teamId=b.absUrl().split("team_id=")[1].split("&")[0],a.teamProgress={},i=function(b,d){if(a.teamProgress.amountRaised=b||0,a.teamProgress.amountRaised=Number(a.teamProgress.amountRaised),a.teamProgress.goal=d||0,a.teamProgress.percent=2,c(function(){var b;if(b=a.teamProgress.percent,0!==a.teamProgress.goal&&(b=Math.ceil(a.teamProgress.amountRaised/a.teamProgress.goal*100)),b<2&&(b=2),b>98&&(b=98),a.teamProgress.percent=b,!a.$$phase)return a.$apply()},500),!a.$$phase)return a.$apply()},e.getTeams("team_id="+a.teamId,{error:function(){return i()},success:function(a){var b,c;return c=null!=(b=a.getTeamSearchByInfoResponse)?b.team:void 0,c?i(c.amountRaised,c.goal):i()}}),a.teamMembers={page:1},g=angular.element(".js--default-team-roster"),h=g.find(".team-roster-participant-row").last(),a.teamMembers.teamGiftsLabel=h.find(".team-roster-participant-name").text(),k=h.find(".team-roster-participant-raised").text(),""===k&&(k="0"),a.teamMembers.teamGiftsAmount=100*k.replace("$","").replace(/,/g,""),a.teamMembers.teamGiftsAmount=Number(a.teamMembers.teamGiftsAmount),a.teamMembers.teamGiftsAmountFormatted=d("currency")(a.teamMembers.teamGiftsAmount/100,"$",0),j=function(b,c){if(a.teamMembers.members=b||[],a.teamMembers.totalNumber=c||0,!a.$$phase)return a.$apply()},a.getTeamMembers=function(){var b;return b=a.teamMembers.page-1,f.getParticipants("first_name="+encodeURIComponent("%%%")+"&list_filter_column=reg.team_id&list_filter_text="+a.teamId+"&list_sort_column=total&list_ascending=false&list_page_size=4&list_page_offset="+b,{error:function(){return j()},success:function(a){var b,c,e;if(j(),e=null!=(b=a.getParticipantsResponse)?b.participant:void 0)return angular.isArray(e)||(e=[e]),c=[],angular.forEach(e,function(a){var b,e;if(null!=(e=a.name)?e.first:void 0)return a.amountRaised=Number(a.amountRaised),a.amountRaisedFormatted=d("currency")(a.amountRaised/100,"$",0),b=a.donationUrl,b&&(a.donationUrl=b.split("/site/")[1]),c.push(a)}),j(c,a.getParticipantsResponse.totalNumberResults)}})},a.getTeamMembers()}])}).call(this);